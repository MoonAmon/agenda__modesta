{% extends "base.html" %}

{% block title %}Pacotes de Serviço - Agenda Modesta{% endblock %}

{% block content %}
<div class="page-header">
  <div>
    <h1 class="page-title">Pacotes de Serviço</h1>
    <p class="text-gray-500 mt-1">Configure seus pacotes de horas e serviços</p>
  </div>
  <a href="{% url 'finance:pacote_create' %}" class="btn btn-primary">
    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
    </svg>
    Novo Pacote
  </a>
</div>

<!-- Pacotes Grid -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
  {% for pacote in pacotes %}
  <div class="card hover:shadow-md transition-shadow" id="pacote-{{ pacote.id }}">
    <div class="card-header bg-gradient-to-r from-primary-500 to-primary-600">
      <div class="flex items-center justify-between">
        <h3 class="font-semibold text-white">{{ pacote.nome }}</h3>
        {% if pacote.ativo %}
        <span class="badge bg-white/20 text-white">Ativo</span>
        {% else %}
        <span class="badge bg-white/20 text-white">Inativo</span>
        {% endif %}
      </div>
    </div>
    <div class="card-body">
      <div class="text-center py-4">
        <p class="text-3xl font-bold text-gray-900">
          R$ {{ pacote.valor_hora_pacote }}
          <span class="text-base font-normal text-gray-500">/hora</span>
        </p>
        {% if pacote.horas_inclusas %}
        <p class="text-sm text-gray-500 mt-1">{{ pacote.horas_inclusas }}h incluídas</p>
        {% else %}
        <p class="text-sm text-gray-500 mt-1">Hora avulsa</p>
        {% endif %}
      </div>

      {% if pacote.descricao %}
      <p class="text-sm text-gray-600 mb-4">{{ pacote.descricao }}</p>
      {% endif %}

      <ul class="space-y-2 mb-4">
        {% if pacote.inclui_otimizacao %}
        <li class="flex items-center gap-2 text-sm text-gray-600">
          <svg class="w-4 h-4 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
          </svg>
          Inclui otimização
        </li>
        {% endif %}
        {% if pacote.beneficios %}
        <li class="flex items-start gap-2 text-sm text-gray-600">
          <svg class="w-4 h-4 text-green-500 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
          </svg>
          <span>{{ pacote.beneficios|truncatewords:10 }}</span>
        </li>
        {% endif %}
      </ul>

      <div class="flex items-center justify-end gap-2 pt-4 border-t border-gray-100">
        <a href="{% url 'finance:pacote_edit' pacote.id %}"
           class="text-gray-400 hover:text-primary-600" title="Editar">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
          </svg>
        </a>
        <button hx-delete="{% url 'finance:pacote_delete' pacote.id %}"
                hx-target="#pacote-{{ pacote.id }}"
                hx-swap="outerHTML"
                hx-confirm="Tem certeza que deseja excluir este pacote?"
                class="text-gray-400 hover:text-red-600" title="Excluir">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
          </svg>
        </button>
      </div>
    </div>
  </div>
  {% empty %}
  <div class="col-span-full">
    <div class="card">
      <div class="card-body text-center py-12">
        <svg class="w-16 h-16 text-gray-300 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path>
        </svg>
        <p class="text-gray-500 mb-4">Nenhum pacote cadastrado</p>
        <a href="{% url 'finance:pacote_create' %}" class="btn btn-primary">Criar Primeiro Pacote</a>
      </div>
    </div>
  </div>
  {% endfor %}
</div>
{% endblock %}
